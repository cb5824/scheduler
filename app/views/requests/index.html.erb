<div id="ajax_alert" >Test test test</div>
<div class="index_top_container">

  <h1>Showing requests for <%= @thisyear %>, week <%= @thisweek %></h1>
  <% if params["week"] %><% weekview = params["week"].to_i %><% else %><% weekview = Time.zone.now.to_datetime.cweek %><% end %>

  <%= form_tag(requests_path, method: "get") do %>



<div id="line_sheet_header">
  <div id="line_sheet_left">
    <%= link_to "back one week", requests_path(:week => (weekview -1), :year => Time.zone.now.to_datetime.cwyear), class: "fakebutton" %>
    <%= link_to "current week",requests_path(:week => Time.zone.now.to_datetime.cweek, :year => Time.zone.now.to_datetime.cwyear), class: "fakebutton" %>
    <%= link_to "forward one week",requests_path(:week =>  (weekview +1), :year => Time.zone.now.to_datetime.cwyear), class: "fakebutton" %>
    <br>
    <br>
    <br>
    <% if params["week"] %>
    <%= hidden_field_tag("filter_week", value = params["week"]) %>
    <%= hidden_field_tag("filter_year", value = params["year"]) %>
    <% else %>
    <%= hidden_field_tag("filter_week", value = params["filter_week"]) %>
    <%= hidden_field_tag("filter_year", value = params["filter_year"]) %>
    <% end %>

    <%= label_tag(:year, "Year:") %>
    <%= number_field_tag(:year, @thisyear) %>
    <%= label_tag(:week, "Week:") %>
    <%= number_field_tag(:week, @thisweek) %>
    <br>
    <br>
    <br>
    <%=
      link_to 'Download as Excel',
      requests_path(format: :xlsx, filter_week: params["filter_week"], filter_year: params["filter_year"], year: params["year"], week: params["week"], mt1: params["mt1"], mt2: params["mt2"], mt3: params["mt3"], mt4: params["mt4"], other: params["other"], night_work: params["night_work"], single_tracking: params["single_tracking"], taw: params["taw"], form_b: params["form_b"], form_c: params["form_c"], track_and_time: params["track_and_time"], inacc_track: params["inacc_track"], rwp: params["rwp"], ocs: params["ocs"], disturb: params["disturb"], rrm: params["rrm"], foul: params["foul"], crossings: params["crossings"], underground: params["underground"], flagging: params["flagging"], show_cancelled: params["show_cancelled"], show_approved: params["show_approved"], show_pending: params["show_pending"], show_rejected: params["show_rejected"], day_work: params["day_work"], no_single_tracking: params["no_single_tracking"])
    %>

  </div>
  <div id="line_sheet_center">
    <% if @user.role == "admin" || @user.role == "superadmin" %>
      <textarea name="news_feed" id="news_feed" rows="15" cols="75" data-week="<%= @thisweek %>" data-year="<%= @thisyear %>"><% if Newsfeed.where(week: @thisweek, year: @thisyear) != [] %><%= Newsfeed.where(week: @thisweek, year: @thisyear)[0].contents %><% end %></textarea>
      <button type="button" name="news_update" id="news_update">Save</button>
    <% else %>
      <p id="news_display"><% if Newsfeed.where(week: @thisweek, year: @thisyear) != [] %>** <%= Newsfeed.where(week: @thisweek, year: @thisyear)[0].contents %> **<% end %></p>
    <% end %>
  </div>


<div id="line_sheet_right">
    <%= submit_tag("Filter") %>
    <%= link_to "Clear Filters", requests_path(:year => @thisyear, :week => @thisweek), class: "fakebutton" %>
  <br>
  <div id="filter_container">

    <div class="filter_block">
      <div class="filter_header">
        Status
      </div>
      <div class="filter_line">
      </div>
      <div class="filter_line">
        Cancelled:
        <% if params["show_cancelled"] != nil %>
        <%= check_box_tag("show_cancelled", true, true) %>
        <% else %>
        <%= check_box_tag("show_cancelled", true) %>
        <% end %>
      </div>
      <div class="filter_line">
        Approved:
        <% if params["show_approved"] != nil %>
        <%= check_box_tag("show_approved", true, true) %>
        <% else %>
        <%= check_box_tag("show_approved", true) %>
        <% end %>
      </div>
      <div class="filter_line">
        Pending:
        <% if params["show_pending"] != nil %>
        <%= check_box_tag("show_pending", true, true) %>
        <% else %>
        <%= check_box_tag("show_pending", true) %>
        <% end %>
      </div>
      <div class="filter_line">
        Rejected:
        <% if params["show_rejected"] != nil %>
        <%= check_box_tag("show_rejected", true, true) %>
        <% else %>
        <%= check_box_tag("show_rejected", true) %>
        <% end %>
      </div>
    </div>


    <div class="filter_block">
      <div class="filter_header">
        Time Frame
      </div>
      <div class="filter_line time_frame">
        Night work:
        <% if params["night_work"] != nil %>
        <%= check_box_tag("night_work", 1, true) %>
        <% else %>
        <%= check_box_tag("night_work", 1) %>
        <% end %>
      </div>
      <div class="filter_line time_frame">
        Day work:
        <% if params["day_work"] != nil %>
        <%= check_box_tag("day_work", 1, true) %>
        <% else %>
        <%= check_box_tag("day_work", 1) %>
        <% end %>
      </div>
    </div>

    <div class="filter_block">
      <div class="filter_header">
        Single Tracking
      </div>
      <div class="filter_line">
      </div>
      <div class="filter_line">
        Yes:
        <% if params["single_tracking"] != nil %>
        <%= check_box_tag("single_tracking", true, true) %>
        <% else %>
        <%= check_box_tag("single_tracking", true) %>
        <% end %>
      </div>
      <div class="filter_line">
        No:
        <% if params["no_single_tracking"] != nil %>
        <%= check_box_tag("no_single_tracking", true, true) %>
        <% else %>
        <%= check_box_tag("no_single_tracking", true) %>
        <% end %>
      </div>
    </div>

    <div class="filter_block">
      <div class="filter_header">
        Location
      </div>
      <div class="filter_line">
      </div>
      <div class="filter_line">
        MT1:
        <% if params["mt1"] == "true" %>
        <% mt1_flag = "true" %>
        <% elsif params["mt1"] == "false" %>
        <% mt1_flag = "false" %>
        <% else %>
        <% mt1_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("mt1", value = mt1_flag, :data => { :positive => 'true', :negative => 'false' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if mt1_flag != "true" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if mt1_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if mt1_flag != "false" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        MT2:
        <% if params["mt2"] == "true" %>
        <% mt2_flag = "true" %>
        <% elsif params["mt2"] == "false" %>
        <% mt2_flag = "false" %>
        <% else %>
        <% mt2_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("mt2", value = mt2_flag, :data => { :positive => 'true', :negative => 'false' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if mt2_flag != "true" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if mt2_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if mt2_flag != "false" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        MT3:
        <% if params["mt3"] == "true" %>
        <% mt3_flag = "true" %>
        <% elsif params["mt3"] == "false" %>
        <% mt3_flag = "false" %>
        <% else %>
        <% mt3_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("mt3", value = mt3_flag, :data => { :positive => 'true', :negative => 'false' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if mt3_flag != "true" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if mt3_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if mt3_flag != "false" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        MT4:
        <% if params["mt4"] == "true" %>
        <% mt4_flag = "true" %>
        <% elsif params["mt4"] == "false" %>
        <% mt4_flag = "false" %>
        <% else %>
        <% mt4_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("mt4", value = mt4_flag, :data => { :positive => 'true', :negative => 'false' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if mt4_flag != "true" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if mt4_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if mt4_flag != "false" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        Other:
        <% if params["other"] == "true" %>
        <% other_flag = "true" %>
        <% elsif params["other"] == "false" %>
        <% other_flag = "false" %>
        <% else %>
        <% other_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("other", value = other_flag, :data => { :positive => 'true', :negative => 'false' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if other_flag != "true" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if other_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if other_flag != "false" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
    </div>


    <div class="filter_block">
      <div class="filter_header">
        Protection
      </div>
      <div class="filter_line">
      </div>
      <div class="filter_line">
        TAW:
        <% if params["taw"] == "true" %>
        <% taw_flag = "true" %>
        <% elsif params["taw"] == "false" %>
        <% taw_flag = "false" %>
        <% else %>
        <% taw_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("taw", value = taw_flag, :data => { :positive => 'true', :negative => 'false' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if taw_flag != "true" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if taw_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if taw_flag != "false" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        Form B:
        <% if params["form_b"] == "true" %>
        <% form_b_flag = "true" %>
        <% elsif params["form_b"] == "false" %>
        <% form_b_flag = "false" %>
        <% else %>
        <% form_b_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("form_b", value = form_b_flag, :data => { :positive => 'true', :negative => 'false' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if form_b_flag != "true" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if form_b_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if form_b_flag != "false" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        Form C:
        <% if params["form_c"] == "true" %>
        <% form_c_flag = "true" %>
        <% elsif params["form_c"] == "false" %>
        <% form_c_flag = "false" %>
        <% else %>
        <% form_c_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("form_c", value = form_c_flag, :data => { :positive => 'true', :negative => 'false' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if form_c_flag != "true" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if form_c_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if form_c_flag != "false" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        T & T:
        <% if params["track_and_time"] == "true" %>
        <% track_and_time_flag = "true" %>
        <% elsif params["track_and_time"] == "false" %>
        <% track_and_time_flag = "false" %>
        <% else %>
        <% track_and_time_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("track_and_time", value = track_and_time_flag, :data => { :positive => 'true', :negative => 'false' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if track_and_time_flag != "true" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if track_and_time_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if track_and_time_flag != "false" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        Inacc Track:
        <% if params["inacc_track"] == "true" %>
        <% inacc_track_flag = "true" %>
        <% elsif params["inacc_track"] == "false" %>
        <% inacc_track_flag = "false" %>
        <% else %>
        <% inacc_track_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("inacc_track", value = inacc_track_flag, :data => { :positive => 'true', :negative => 'false' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if inacc_track_flag != "true" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if inacc_track_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if inacc_track_flag != "false" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
    </div>

    <div class="filter_block">
      <div class="filter_header">
        Other
      </div>
      <div class="filter_line">
      </div>
      <div class="filter_line">
        RWP Cert:
        <% if params["rwp"] == "yes" %>
        <% rwp_flag = "yes" %>
        <% elsif params["rwp"] == "no" %>
        <% rwp_flag = "no" %>
        <% else %>
        <% rwp_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("rwp", value = rwp_flag, :data => { :positive => 'yes', :negative => 'no' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if rwp_flag != "yes" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if rwp_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if rwp_flag != "no" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        OCS/25kV:
        <% if params["ocs"] == "yes" %>
        <% ocs_flag = "yes" %>
        <% elsif params["ocs"] == "no" %>
        <% ocs_flag = "no" %>
        <% else %>
        <% ocs_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("ocs", value = ocs_flag, :data => { :positive => 'yes', :negative => 'no' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if ocs_flag != "yes" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if ocs_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if ocs_flag != "no" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        Disturb Track:
        <% if params["disturb"] == "yes" %>
        <% disturb_flag = "yes" %>
        <% elsif params["disturb"] == "no" %>
        <% disturb_flag = "no" %>
        <% else %>
        <% disturb_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("disturb", value = disturb_flag, :data => { :positive => 'yes', :negative => 'no' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if disturb_flag != "yes" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if disturb_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if disturb_flag != "no" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        RMM on Track:
        <% if params["rrm"] == "yes" %>
        <% rrm_flag = "yes" %>
        <% elsif params["rrm"] == "no" %>
        <% rrm_flag = "no" %>
        <% else %>
        <% rrm_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("rrm", value = rrm_flag, :data => { :positive => 'yes', :negative => 'no' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if rrm_flag != "yes" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if rrm_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if rrm_flag != "no" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        RMM Off Track:
        <% if params["foul"] == "yes" %>
        <% foul_flag = "yes" %>
        <% elsif params["foul"] == "no" %>
        <% foul_flag = "no" %>
        <% else %>
        <% foul_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("foul", value = foul_flag, :data => { :positive => 'yes', :negative => 'no' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if foul_flag != "yes" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if foul_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if foul_flag != "no" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        Affect Xings:
        <% if params["crossings"] == "yes" %>
        <% crossings_flag = "yes" %>
        <% elsif params["crossings"] == "no" %>
        <% crossings_flag = "no" %>
        <% else %>
        <% crossings_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("crossings", value = crossings_flag, :data => { :positive => 'yes', :negative => 'no' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if crossings_flag != "yes" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if crossings_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if crossings_flag != "no" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        Utility Locates:
        <% if params["underground"] == "yes" %>
        <% underground_flag = "yes" %>
        <% elsif params["underground"] == "no" %>
        <% underground_flag = "no" %>
        <% else %>
        <% underground_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("underground", value = underground_flag, :data => { :positive => 'yes', :negative => 'no' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if underground_flag != "yes" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if underground_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if underground_flag != "no" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
      <div class="filter_line">
        Traffic Control:
        <% if params["flagging"] == "yes" %>
        <% flagging_flag = "yes" %>
        <% elsif params["flagging"] == "no" %>
        <% flagging_flag = "no" %>
        <% else %>
        <% flagging_flag = "all" %>
        <% end %>
        <%= hidden_field_tag("flagging", value = flagging_flag, :data => { :positive => 'yes', :negative => 'no' }) %>
          <div class="filter_bar">
           <div class="filter_bar_block green_block <% if flagging_flag != "yes" %>deselected<% end %>">
             <%= "\u2713" %>
           </div>
           <div class="filter_bar_block neutral_block <% if flagging_flag != "all" %>deselected<% end %>">
             <%= "\u27F7" %>
           </div>
          <div class="filter_bar_block red_block <% if flagging_flag != "no" %>deselected<% end %>">
            <%= "\u0058" %>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  </div>
  <% end %>

</div>


<div class="daytab active" id="first_tab" data-displaytab="week">
Week
</div>
<div class="daytab inactive" data-displaytab="mon">
Mon
</div>
<div class="daytab inactive" data-displaytab="tue">
Tue
</div>
<div class="daytab inactive" data-displaytab="wed">
Wed
</div>
<div class="daytab inactive" data-displaytab="thu">
Thu
</div>
<div class="daytab inactive" data-displaytab="fri">
Fri
</div>
<div class="daytab inactive" data-displaytab="sat">
Sat
</div>
<div class="daytab inactive" data-displaytab="sun">
Sun
</div>

  <div id="divOverlay" data-reqnum="test">
    <div class="overlay_actions">
      <%= image_tag "red_x.png", class: "closeoverlay", alt: "Pending" %>
      <button type="button" class="showpage overlay_button">Details</button>
      <button type="button" class="overlay_button" id="editrequest">Edit</button>
      <button type="button" class="copyrequest overlay_button">Copy</button>
    </div>
    <div class="overlay_emulate">
      <div>
        <% if @user.role == "superadmin" %>
          <label for="emulate">Admin group to emulate:</label>
          <select id="emulate">
            <option value="1">Group 1</option>
            <option value="2">Group 2</option>
            <option value="3">Group 3</option>
            <option value="4">Group 4</option>
            <option value="all">All Groups</option>
          </select>
        <% end %>
        </div>
      </div>
      <div id="overlay_approvals">
        <% if @user.role != "inspector" %>
          <label for="new_status">Change to:</label>
          <select id="new_status">
            <% if @user.role == "admin" || @user.role == "superadmin" %>
            <option value="1">Approved</option>
            <option value="2">Rejected</option>
            <option value="3">Pending</option>
            <% end %>
            <option value="4">Cancelled</option>
            <option value="5" id="reinstate_option">Reinstated</option>
          </select>
          <div class="overlay_day_box">
            <label for="mon_check">Mon</label>
            <input type="checkbox" id="mon_check" name="mon_check" value="mon_check">
          </div>
          <div class="overlay_day_box">
            <label for="tue_check">Tue</label>
            <input type="checkbox" id="tue_check" name="tue_check" value="tue_check">
          </div>
          <div class="overlay_day_box">
            <label for="wed_check">Wed</label>
            <input type="checkbox" id="wed_check" name="wed_check" value="wed_check">
          </div>
            <div class="overlay_day_box">
            <label for="thu_check">Thu</label>
            <input type="checkbox" id="thu_check" name="thu_check" value="thu_check">
          </div>
            <div class="overlay_day_box">
            <label for="fri_check">Fri</label>
            <input type="checkbox" id="fri_check" name="fri_check" value="fri_check">
          </div>
            <div class="overlay_day_box">
            <label for="sat_check">Sat</label>
            <input type="checkbox" id="sat_check" name="sat_check" value="sat_check">
          </div>
            <div class="overlay_day_box">
            <label for="sun_check">Sun</label>
            <input type="checkbox" id="sun_check" name="sun_check" value="sun_check">
          </div>
          <button class="superoverlay_button" data-scope="all">Change All</button>
          <button class="superoverlay_button" data-scope="select">Change Selected</button>
          <% end %>
      </div>
      <% if @user.role == "superadmin" %>
        <button type="button" class="overlay_button" id="deleterequest">Delete Request</button>
      <% end %>
    </div>
  </div>

  <div id="notesOverlay">
    <div id="notes_workspace">
      <textarea rows="8" cols="80"></textarea>
      <button class="notesoverlay_button savenotes">Save Notes</button>
    </div>
    <%= image_tag "red_x.png", class: "closeNotesOverlay", alt: "close" %>

  </div>

<div class="wrapper margin_wrapper">
<div id="weekly_table" class="displaytable">

    <table class="requests_table">
      <thead>
        <tr>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Approval Status</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Line #</div></th>
          <th rowspan="2" class="wmedium"><div>Project <br>WD #</div></th>
          <th rowspan="2"  class="wmedium"><div>Contractor</div></th>
          <th colspan="7" class="topheader"><div>Location</th>
          <th rowspan="2"><div class="wlarge">Description of Work</th>
          <th colspan="7"><div>Support Allocation</th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Single Tracking</div></th>
          <th rowspan="2" class="shift"><div>Shift (24 hr)</th>
          <th colspan="5"><div>Protection</th>
          <th rowspan="2" class="wmedium"><div>Associated SSWPs</th>
          <th rowspan="2" class="wmedium"><div>Associated CNs</th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">RWP Training Complete?</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">OCS/25kV De-Energize?</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Disturb Track?</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">RMM On Track?</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">RMM Off Track?</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Disable/Affect Crossings?</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Utility Locates Required?</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Traffic Control Required?</div></th>
          <th colspan="3"><div>Submittal Details</th>
        </tr>
        <tr>
          <th>Mile Post</th>
          <th>Control Point</th>
          <th class="rotated"><div class="smallheader wverysmall">MT1</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT2</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT3</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT4</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Other</div></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 1 %>current_day<% end %>"><%= "Mon\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 1).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 1).day}"%></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 2 %>current_day<% end %>"><%= "Tue\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 2).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 2).day}"%></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 3 %>current_day<% end %>"><%= "Wed\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 3).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 3).day}"%></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 4 %>current_day<% end %>"><%= "Thu\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 4).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 4).day}"%></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 5 %>current_day<% end %>"><%= "Fri\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 5).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 5).day}"%></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 6 %>current_day<% end %>"><%= "Sat\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 6).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 6).day}"%></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 7 %>current_day<% end %>"><%= "Sun\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 7).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 7).day}"%></th>
          <th class="rotated"><div class="smallheader wverysmall">TAW</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form B</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form C</div></th>
          <th class="rotated"><div class="smallheader wverysmall">T&T</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Inacc Trk</div></th>
          <th class="wmedium">Date Submitted</th>
          <th class="wmedium">Last Edited</th>
          <th class="wmedium">Submitted By</th>
        </tr>
      </thead>
      <tbody>
<% counter = 1 %>
  <% @requests.each do |request| %>
      <tr class="hover_row <% if request.cancelled == 1 %>cancelled_day<% end %> <% if request.night_work == 1 %>night_work_line<% end %> <% if request.id == @recent %>recent<% end %>" data-reqnum="<%= request.id %>">
        <td class="reqstatus">
          <div class="index_status hidden">
            <div class="approvals_bar_container">
              <div class="approvals_bar_block <%= request.approval1 %>">
                1
              </div>
              <div class="approvals_bar_block <%= request.approval2 %>">
                2
              </div>
              <div class="approvals_bar_block <%= request.approval3 %>">
                3
              </div>
              <div class="approvals_bar_block <%= request.approval4 %>">
                4
              </div>
            </div>
          </div>


            <div class="status_wrapper">
              <div class="status_half">
                <% case request.approval.groupstatus(1) %>
                <% when "pending" %>
                  <%= image_tag "tl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.groupstatus(2) %>
                <% when "pending" %>
                  <%= image_tag "tr_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tr_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tr_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

              </div>
              <div class="status_half">
                <% case request.approval.groupstatus(3) %>
                <% when "pending" %>
                  <%= image_tag "bl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "bl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "bl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.groupstatus(4) %>
                <% when "pending" %>
                  <%= image_tag "br_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "br_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "br_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>
              </div>
            </div>


      </td>
      <td class="trigger_overlay"><%= counter %></td>
      <td class="trigger_overlay <%= request.color %>"><%= request.requestor_project %><br><%= request.requestor_work_directive %></td>
      <td class="trigger_overlay <% if request.pending["contractor"] == "1" %>changed<% end %>"><%= request.contractor %></td>
      <td class="trigger_overlay preserve-lines <% if request.pending["mile_post"] == "1" %>changed<% end %>"><%= request.weekly.mile_post %></td>
      <td class="trigger_overlay preserve-lines <% if request.pending["control_point"] == "1" %>changed<% end %>"><%= request.weekly.control_point %></td>
      <td class="trigger_overlay <% if request.pending["mt1"] == "1" %>changed<% end %>"><% if request.weekly.mt1 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["mt2"] == "1" %>changed<% end %>"><% if request.weekly.mt2 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["mt3"] == "1" %>changed<% end %>"><% if request.weekly.mt3 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["mt4"] == "1" %>changed<% end %>"><% if request.weekly.mt4 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["other"] == "1" %>changed<% end %>"><% if request.weekly.other == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay preserve-lines <% if request.pending["description"] == "1" %>changed<% end %>"><p class="request_title"><%= request.title %></p><%= request.description %></td>
      <td class="trigger_overlay mon_workers <% if request.monday_hash["cancelled"] == "yes" || request.cancelled == 1 %>cancelled_day<% end %><% if request.pending["mon_workers"] == "1" %> changed<% end %>"><% if request.weekly.mon_workers != "-" %><%= request.weekly.mon_workers %><% else %>-<% end %></td>
      <td class="trigger_overlay tue_workers <% if request.tuesday_hash["cancelled"] == "yes" || request.cancelled == 1 %>cancelled_day<% end %><% if request.pending["tue_workers"] == "1" %> changed<% end %>"><% if request.weekly.tue_workers != "-" %><%= request.weekly.tue_workers %><% else %>-<% end %></td>
      <td class="trigger_overlay wed_workers <% if request.wednesday_hash["cancelled"] == "yes" || request.cancelled == 1 %>cancelled_day<% end %><% if request.pending["wed_workers"] == "1" %> changed<% end %>"><% if request.weekly.wed_workers != "-" %><%= request.weekly.wed_workers %><% else %>-<% end %></td>
      <td class="trigger_overlay thu_workers <% if request.thursday_hash["cancelled"] == "yes" || request.cancelled == 1 %>cancelled_day<% end %><% if request.pending["thu_workers"] == "1" %> changed<% end %>"><% if request.weekly.thu_workers != "-" %><%= request.weekly.thu_workers %><% else %>-<% end %></td>
      <td class="trigger_overlay fri_workers <% if request.friday_hash["cancelled"] == "yes" || request.cancelled == 1 %>cancelled_day<% end %><% if request.pending["fri_workers"] == "1" %> changed<% end %>"><% if request.weekly.fri_workers != "-" %><%= request.weekly.fri_workers %><% else %>-<% end %></td>
      <td class="trigger_overlay sat_workers <% if request.saturday_hash["cancelled"] == "yes" || request.cancelled == 1 %>cancelled_day<% end %><% if request.pending["sat_workers"] == "1" %> changed<% end %>"><% if request.weekly.sat_workers != "-" %><%= request.weekly.sat_workers %><% else %>-<% end %></td>
      <td class="trigger_overlay sun_workers <% if request.sunday_hash["cancelled"] == "yes" || request.cancelled == 1 %>cancelled_day<% end %><% if request.pending["sun_workers"] == "1" %> changed<% end %>"><% if request.weekly.sun_workers != "-" %><%= request.weekly.sun_workers %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["single_tracking"] == "1" %>changed<% end %>"><% if request.weekly.single_tracking == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay preserve-lines <% if request.pending["shift"] == "1" %>changed<% end %>"><%= request.weekly.shift %></td>
      <td class="trigger_overlay <% if request.pending["taw"] == "1" %>changed<% end %>"><% if request.weekly.taw == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["form_b"] == "1" %>changed<% end %>"><% if request.weekly.form_b == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["form_c"] == "1" %>changed<% end %>"><% if request.weekly.form_c == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["track_and_time"] == "1" %>changed<% end %>"><% if request.weekly.track_and_time == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["inacc_track"] == "1" %>changed<% end %>"><% if request.weekly.inacc_track == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["sswps"] == "1" %>changed<% end %>"><%= request.sswps %></td>
      <td class="trigger_overlay <% if request.pending["change_notices"] == "1" %>changed<% end %>"><%= request.change_notices %></td>
      <td class="trigger_overlay <% if request.pending["rwp"] == "1" %>changed<% end %>"><% if request.rwp == "yes" %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["ocs"] == "1" %>changed<% end %>"><% if request.ocs == "yes" %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["disturb"] == "1" %>changed<% end %>"><% if request.disturb == "yes" %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["rrm"] == "1" %>changed<% end %>"><% if request.rrm == "yes" %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["foul"] == "1" %>changed<% end %>"><% if request.foul == "yes" %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["crossings"] == "1" %>changed<% end %>"><% if request.crossings == "yes" %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["underground"] == "1" %>changed<% end %>"><% if request.underground == "yes" %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay <% if request.pending["flagging"] == "1" %>changed<% end %>"><% if request.flagging == "yes" %><%= "\u2713" %><% else %>-<% end %></td>
      <td class="trigger_overlay"><%= request.created_at.strftime("%m/%d/%Y") %></td>
      <td class="trigger_overlay"><%= request.updated_at.strftime("%m/%d/%Y") %></td>
      <td class="trigger_overlay"><%= request.requestor_name %></td>
    </tr>
    <% counter += 1 %>
  <% end %>
  </tbody>

  </table>
</div>
<!-- start of day to be copied -->

  <div id="monday_table" class="displaytable hidden">
      <table class="requests_table">
        <thead>
          <tr>
            <th rowspan="2" class="rotated trflex"><div class="tallheader">Approval Status</div></th>
            <th rowspan="2" class="rotated trflex"><div class="tallheader">Line #</div></th>
            <th rowspan="2" class="wmedium"><div>Project <br>WD #</div></th>
            <th rowspan="2"  class="wmedium"><div>Contractor</div></th>
            <th colspan="7" class="topheader"><div>Location</th>
            <th rowspan="2"><div class="wlarge">Description of Work</th>
            <th><div>Support Allocation</th>
            <th rowspan="2" class="briefing_details">Briefing Details</th>
            <th rowspan="2" class="rotated trflex"><div class="tallheader">Single Tracking</div></th>
            <th rowspan="2" class="shift"><div>Shift (24 hr)</th>
            <th colspan="5"><div>Protection</th>
            <th rowspan="2" class="notes"><div class="notes_wrapper"><div class="notes_title">Notes</div><div class="notes_tab_container"><div class="notes_tab active" data-notetype=".requestor_notes" data-daytable="#monday_table">Requestor</div><div class="notes_tab inactive" data-notetype=".admin_notes" data-daytable="#monday_table">Admin</div><div class="notes_tab inactive" data-notetype=".inspector_notes" data-daytable="#monday_table">Inspector</div></div></div></th>
          </tr>
          <tr>
            <th>Mile Post</th>
            <th>Control Point</th>
            <th class="rotated"><div class="smallheader wverysmall">MT1</div></th>
            <th class="rotated"><div class="smallheader wverysmall">MT2</div></th>
            <th class="rotated"><div class="smallheader wverysmall">MT3</div></th>
            <th class="rotated"><div class="smallheader wverysmall">MT4</div></th>
            <th class="rotated"><div class="smallheader wverysmall">Other</div></th>
            <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 1 %>current_day<% end %>"><%= "Mon\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 1).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 1).day}"%></th>
            <th class="rotated"><div class="smallheader wverysmall">TAW</div></th>
            <th class="rotated"><div class="smallheader wverysmall">Form B</div></th>
            <th class="rotated"><div class="smallheader wverysmall">Form C</div></th>
            <th class="rotated"><div class="smallheader wverysmall">T&T</div></th>
            <th class="rotated"><div class="smallheader wverysmall">Inacc Trk</div></th>
          </tr>
        </thead>
        <tbody>
          <% counter = 1 %>
    <% @requests.each do |request| %>


       <% if request.mon == 1  || request.monday_hash["cancelled"] == "yes"%>
        <tr class="hover_row <% if request.cancelled == 1 || request.monday_hash["cancelled"] == "yes" %>cancelled_day<% end %> <% if request.night_work == 1 %>night_work_line<% end %> <% if request.id == @recent %>recent<% end %>" data-reqnum="<%= request.id %>">
          <td class="reqstatus">
            <div class="index_status hidden">
              <div class="approvals_bar_container">
                <div class="approvals_bar_block <%= request.approval1 %>">
                  1
                </div>
                <div class="approvals_bar_block <%= request.approval2 %>">
                  2
                </div>
                <div class="approvals_bar_block <%= request.approval3 %>">
                  3
                </div>
                <div class="approvals_bar_block <%= request.approval4 %>">
                  4
                </div>
              </div>
            </div>
              <div class="status_wrapper">
                <div class="status_half">
                  <% case request.approval.group_1_mon %>
                  <% when "pending" %>
                    <%= image_tag "tl_yellow.png", class: "status_icon", alt: "Pending" %>
                  <% when "rejected" %>
                    <%= image_tag "tl_red.png", class: "status_icon", alt: "Pending" %>
                  <% when "approved" %>
                    <%= image_tag "tl_green.png", class: "status_icon", alt: "Pending" %>
                  <% end %>

                  <% case request.approval.group_2_mon %>
                  <% when "pending" %>
                    <%= image_tag "tr_yellow.png", class: "status_icon", alt: "Pending" %>
                  <% when "rejected" %>
                    <%= image_tag "tr_red.png", class: "status_icon", alt: "Pending" %>
                  <% when "approved" %>
                    <%= image_tag "tr_green.png", class: "status_icon", alt: "Pending" %>
                  <% end %>

                </div>
                <div class="status_half">
                  <% case request.approval.group_3_mon %>
                  <% when "pending" %>
                    <%= image_tag "bl_yellow.png", class: "status_icon", alt: "Pending" %>
                  <% when "rejected" %>
                    <%= image_tag "bl_red.png", class: "status_icon", alt: "Pending" %>
                  <% when "approved" %>
                    <%= image_tag "bl_green.png", class: "status_icon", alt: "Pending" %>
                  <% end %>

                  <% case request.approval.group_4_mon %>
                  <% when "pending" %>
                    <%= image_tag "br_yellow.png", class: "status_icon", alt: "Pending" %>
                  <% when "rejected" %>
                    <%= image_tag "br_red.png", class: "status_icon", alt: "Pending" %>
                  <% when "approved" %>
                    <%= image_tag "br_green.png", class: "status_icon", alt: "Pending" %>
                  <% end %>
                </div>
              </div>
        </td>
        <td class="trigger_overlay"><%= counter %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <%= request.color %>"><%= request.requestor_project %><br><%= request.requestor_work_directive %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["contractor"] == "1" %>changed<% end %>"><%= request.contractor %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["monday_values"]["mp1"] == "1" || request.pending["monday_values"]["mp2"] == "1"  %>changed<% end %>"><%= "#{request.monday_hash["mp1"].to_f} -\n#{request.monday_hash["mp2"].to_f}" %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["monday_values"]["cp1"] == "1" || request.pending["monday_values"]["cp2"] == "1" %>changed<% end %>"><%= "#{request.parse_cp(request.monday_hash["cp1"].to_i)} -\n#{request.parse_cp(request.monday_hash["cp2"].to_i)}" %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["monday_values"]["MT1"] == "1" %>changed<% end %>"><% if request.weekly.mt1 == true %><%= "\u2713" %><% else %>-<% end %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["monday_values"]["MT2"] == "1" %>changed<% end %>"><% if request.weekly.mt2 == true %><%= "\u2713" %><% else %>-<% end %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["monday_values"]["MT3"] == "1" %>changed<% end %>"><% if request.weekly.mt3 == true %><%= "\u2713" %><% else %>-<% end %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["monday_values"]["MT4"] == "1" %>changed<% end %>"><% if request.weekly.mt4 == true %><%= "\u2713" %><% else %>-<% end %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["monday_values"]["other"] == "1" %>changed<% end %>"><% if request.weekly.other == true %><%= "\u2713" %><% else %>-<% end %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["description"] == "1" %>changed<% end %>"><p class="request_title"><%= request.title %></p><%= request.description %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["mon_workers"] == "1" %>changed<% end %>"><%= request.weekly.mon_workers %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["monday_values"]["b_time"] == "1" || request.pending["monday_values"]["b_location"] == "1"|| request.pending["monday_values"]["onsite_name"] == "1" || request.pending["monday_values"]["onsite_number"] == "1" %>changed<% end %>"><%= "#{request.monday_hash["b_time"]}\n#{request.monday_hash["b_location"]}\n#{request.monday_hash["onsite_name"]}  #{request.monday_hash["onsite_number"]}" %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["monday_values"]["single_track"] == "1" %>changed<% end %>"><% if request.weekly.single_tracking == true %><%= "\u2713" %><% else %>-<% end %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["monday_values"]["start_time"] == "1" || request.pending["monday_values"]["end_time"] == "1"  %>changed<% end %>"><%= request.weekly.shift %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.monday_values["taw"] == "1" %>changed<% end %>"><% if request.monday_hash["taw"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.monday_values["form_b"] == "1" %>changed<% end %>"><% if request.monday_hash["form_b"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.monday_values["form_c"] == "1" %>changed<% end %>"><% if request.monday_hash["form_c"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.monday_values["track_and_time"] == "1" %>changed<% end %>"><% if request.monday_hash["track_and_time"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
        <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["monday_values"]["inacc_track"] == "1" %>changed<% end %>"><% if request.weekly.inacc_track == true %><%= "\u2713" %><% else %>-<% end %></td>
        <td data-href="<%= request_path(request) %>" data-reqnum="<%= request.id %>" data-day="mon" data-address="<%= api_v1_request_path(request) %>" class="notes_cell"><div class="notes_content preserve-lines requestor_notes"><%= request.requestor_notes_mon %></div><div class="notes_content preserve-lines admin_notes hidden"><%= request.admin_notes_mon %></div><div class="notes_content preserve-lines inspector_notes hidden"><%= request.inspector_notes_mon %></div></td>
      </tr>
      <% counter += 1 %>
      <% end %>
  <% end %>
  </tbody>

  </table>
</div>

<!-- end of day to be copied -->

<div id="tuesday_table" class="displaytable hidden">
    <table class="requests_table">
      <thead>
        <tr>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Approval Status</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Line #</div></th>
          <th rowspan="2" class="wmedium"><div>Project <br>WD #</div></th>
          <th rowspan="2"  class="wmedium"><div>Contractor</div></th>
          <th colspan="7" class="topheader"><div>Location</th>
          <th rowspan="2"><div class="wlarge">Description of Work</th>
          <th><div>Support Allocation</th>
          <th rowspan="2" class="briefing_details">Briefing Details</th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Single Tracking</div></th>
          <th rowspan="2" class="shift"><div>Shift (24 hr)</th>
          <th colspan="5"><div>Protection</th>
          <th rowspan="2" class="notes"><div class="notes_wrapper"><div class="notes_title">Notes</div><div class="notes_tab_container"><div class="notes_tab active" data-notetype=".requestor_notes" data-daytable="#tuesday_table">Requestor</div><div class="notes_tab inactive" data-notetype=".admin_notes" data-daytable="#tuesday_table">Admin</div><div class="notes_tab inactive" data-notetype=".inspector_notes" data-daytable="#tuesday_table">Inspector</div></div></div></th>
        </tr>
        <tr>
          <th>Mile Post</th>
          <th>Control Point</th>
          <th class="rotated"><div class="smallheader wverysmall">MT1</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT2</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT3</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT4</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Other</div></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 2 %>current_day<% end %>"><%= "Tue\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 2).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 2).day}"%></th>
          <th class="rotated"><div class="smallheader wverysmall">TAW</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form B</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form C</div></th>
          <th class="rotated"><div class="smallheader wverysmall">T&T</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Inacc Trk</div></th>
        </tr>
      </thead>
      <tbody>
        <% counter = 1 %>
  <% @requests.each do |request| %>


    <% if request.tue == 1  || request.tuesday_hash["cancelled"] == "yes"%>

      <tr class="hover_row <% if request.cancelled == 1 || request.tuesday_hash["cancelled"] == "yes" %>cancelled_day<% end %> <% if request.night_work == 1 %>night_work_line<% end %> <% if request.id == @recent %>recent<% end %>" data-reqnum="<%= request.id %>">
        <td class="reqstatus">
          <div class="index_status hidden">
            <div class="approvals_bar_container">
              <div class="approvals_bar_block <%= request.approval1 %>">
                1
              </div>
              <div class="approvals_bar_block <%= request.approval2 %>">
                2
              </div>
              <div class="approvals_bar_block <%= request.approval3 %>">
                3
              </div>
              <div class="approvals_bar_block <%= request.approval4 %>">
                4
              </div>
            </div>
          </div>

            <div class="status_wrapper">
              <div class="status_half">
                <% case request.approval.group_1_tue %>
                <% when "pending" %>
                  <%= image_tag "tl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_2_tue %>
                <% when "pending" %>
                  <%= image_tag "tr_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tr_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tr_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

              </div>
              <div class="status_half">
                <% case request.approval.group_3_tue %>
                <% when "pending" %>
                  <%= image_tag "bl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "bl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "bl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_4_tue %>
                <% when "pending" %>
                  <%= image_tag "br_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "br_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "br_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>
              </div>
            </div>
      </td>
      <td class="trigger_overlay"><%= counter %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <%= request.color %>"><%= request.requestor_project %><br><%= request.requestor_work_directive %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["contractor"] == "1" %>changed<% end %>"><%= request.contractor %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["tuesday_values"]["mp1"] == "1" || request.pending["tuesday_values"]["mp2"] == "1"  %>changed<% end %>"><%= "#{request.tuesday_hash["mp1"]} -\n#{request.tuesday_hash["mp2"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["tuesday_values"]["cp1"] == "1" || request.pending["tuesday_values"]["cp2"] == "1" %>changed<% end %>"><%= "#{request.parse_cp(request.tuesday_hash["cp1"].to_i)} -\n#{request.parse_cp(request.tuesday_hash["cp2"].to_i)}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["tuesday_values"]["MT1"] == "1" %>changed<% end %>"><% if request.weekly.mt1 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["tuesday_values"]["MT2"] == "1" %>changed<% end %>"><% if request.weekly.mt2 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["tuesday_values"]["MT3"] == "1" %>changed<% end %>"><% if request.weekly.mt3 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["tuesday_values"]["MT4"] == "1" %>changed<% end %>"><% if request.weekly.mt4 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["tuesday_values"]["other"] == "1" %>changed<% end %>"><% if request.weekly.other == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["description"] == "1" %>changed<% end %>"><p class="request_title"><%= request.title %></p><%= request.description %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["tue_workers"] == "1" %>changed<% end %>"><%= request.weekly.tue_workers %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["tuesday_values"]["b_time"] == "1" || request.pending["tuesday_values"]["b_location"] == "1"|| request.pending["tuesday_values"]["onsite_name"] == "1" || request.pending["tuesday_values"]["onsite_number"] == "1" %>changed<% end %>"><%= "#{request.tuesday_hash["b_time"]}\n#{request.tuesday_hash["b_location"]}\n#{request.tuesday_hash["onsite_name"]}  #{request.tuesday_hash["onsite_number"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["tuesday_values"]["single_track"] == "1" %>changed<% end %>"><% if request.weekly.single_tracking == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["tuesday_values"]["start_time"] == "1" || request.pending["tuesday_values"]["end_time"] == "1"  %>changed<% end %>"><%= request.weekly.shift %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.tuesday_values["taw"] == "1" %>changed<% end %>"><% if request.tuesday_hash["taw"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.tuesday_values["form_b"] == "1" %>changed<% end %>"><% if request.tuesday_hash["form_b"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.tuesday_values["form_c"] == "1" %>changed<% end %>"><% if request.tuesday_hash["form_c"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.tuesday_values["track_and_time"] == "1" %>changed<% end %>"><% if request.tuesday_hash["track_and_time"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["tuesday_values"]["inacc_track"] == "1" %>changed<% end %>"><% if request.weekly.inacc_track == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" data-reqnum="<%= request.id %>" data-day="tue" data-address="<%= api_v1_request_path(request) %>" class="notes_cell"><div class="notes_content preserve-lines requestor_notes"><%= request.requestor_notes_tue %></div><div class="notes_content preserve-lines admin_notes hidden"><%= request.admin_notes_tue %></div><div class="notes_content preserve-lines inspector_notes hidden"><%= request.inspector_notes_tue %></div></td>
    </tr>
    <% counter += 1 %>
    <% end %>
<% end %>
</tbody>

</table>
</div>

<div id="wednesday_table" class="displaytable hidden">
    <table class="requests_table">
      <thead>
        <tr>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Approval Status</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Line #</div></th>
          <th rowspan="2" class="wmedium"><div>Project <br>WD #</div></th>
          <th rowspan="2"  class="wmedium"><div>Contractor</div></th>
          <th colspan="7" class="topheader"><div>Location</th>
          <th rowspan="2"><div class="wlarge">Description of Work</th>
          <th><div>Support Allocation</th>
          <th rowspan="2" class="briefing_details">Briefing Details</th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Single Tracking</div></th>
          <th rowspan="2" class="shift"><div>Shift (24 hr)</th>
          <th colspan="5"><div>Protection</th>
          <th rowspan="2" class="notes"><div class="notes_wrapper"><div class="notes_title">Notes</div><div class="notes_tab_container"><div class="notes_tab active" data-notetype=".requestor_notes" data-daytable="#wednesday_table">Requestor</div><div class="notes_tab inactive" data-notetype=".admin_notes" data-daytable="#wednesday_table">Admin</div><div class="notes_tab inactive" data-notetype=".inspector_notes" data-daytable="#wednesday_table">Inspector</div></div></div></th>
        </tr>
        <tr>
          <th>Mile Post</th>
          <th>Control Point</th>
          <th class="rotated"><div class="smallheader wverysmall">MT1</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT2</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT3</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT4</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Other</div></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 3 %>current_day<% end %>"><%= "Wed\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 3).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 3).day}"%></th>
          <th class="rotated"><div class="smallheader wverysmall">TAW</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form B</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form C</div></th>
          <th class="rotated"><div class="smallheader wverysmall">T&T</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Inacc Trk</div></th>
        </tr>
      </thead>
      <tbody>
        <% counter = 1 %>
  <% @requests.each do |request| %>

  <% if request.wed == 1  || request.wednesday_hash["cancelled"] == "yes"%>

      <tr class="hover_row <% if request.cancelled == 1 || request.wednesday_hash["cancelled"] == "yes" %>cancelled_day<% end %> <% if request.night_work == 1 %>night_work_line<% end %> <% if request.id == @recent %>recent<% end %>" data-reqnum="<%= request.id %>">
        <td class="reqstatus">
          <div class="index_status hidden">
            <div class="approvals_bar_container">
              <div class="approvals_bar_block <%= request.approval1 %>">
                1
              </div>
              <div class="approvals_bar_block <%= request.approval2 %>">
                2
              </div>
              <div class="approvals_bar_block <%= request.approval3 %>">
                3
              </div>
              <div class="approvals_bar_block <%= request.approval4 %>">
                4
              </div>
            </div>
          </div>

            <div class="status_wrapper">
              <div class="status_half">
                <% case request.approval.group_1_wed %>
                <% when "pending" %>
                  <%= image_tag "tl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_2_wed %>
                <% when "pending" %>
                  <%= image_tag "tr_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tr_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tr_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

              </div>
              <div class="status_half">
                <% case request.approval.group_3_wed %>
                <% when "pending" %>
                  <%= image_tag "bl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "bl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "bl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_4_wed %>
                <% when "pending" %>
                  <%= image_tag "br_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "br_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "br_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>
              </div>
            </div>
      </td>
      <td class="trigger_overlay"><%= counter %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <%= request.color %>"><%= request.requestor_project %><br><%= request.requestor_work_directive %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["contractor"] == "1" %>changed<% end %>"><%= request.contractor %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["wednesday_values"]["mp1"] == "1" || request.pending["wednesday_values"]["mp2"] == "1"  %>changed<% end %>"><%= "#{request.wednesday_hash["mp1"]} -\n#{request.wednesday_hash["mp2"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["wednesday_values"]["cp1"] == "1" || request.pending["wednesday_values"]["cp2"] == "1" %>changed<% end %>"><%= "#{request.parse_cp(request.wednesday_hash["cp1"].to_i)} -\n#{request.parse_cp(request.wednesday_hash["cp2"].to_i)}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["wednesday_values"]["MT1"] == "1" %>changed<% end %>"><% if request.weekly.mt1 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["wednesday_values"]["MT2"] == "1" %>changed<% end %>"><% if request.weekly.mt2 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["wednesday_values"]["MT3"] == "1" %>changed<% end %>"><% if request.weekly.mt3 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["wednesday_values"]["MT4"] == "1" %>changed<% end %>"><% if request.weekly.mt4 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["wednesday_values"]["other"] == "1" %>changed<% end %>"><% if request.weekly.other == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["description"] == "1" %>changed<% end %>"><p class="request_title"><%= request.title %></p><%= request.description %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["wed_workers"] == "1" %>changed<% end %>"><%= request.weekly.wed_workers %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["wednesday_values"]["b_time"] == "1" || request.pending["wednesday_values"]["b_location"] == "1"|| request.pending["wednesday_values"]["onsite_name"] == "1" || request.pending["wednesday_values"]["onsite_number"] == "1" %>changed<% end %>"><%= "#{request.wednesday_hash["b_time"]}\n#{request.wednesday_hash["b_location"]}\n#{request.wednesday_hash["onsite_name"]}  #{request.wednesday_hash["onsite_number"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["wednesday_values"]["single_track"] == "1" %>changed<% end %>"><% if request.weekly.single_tracking == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["wednesday_values"]["start_time"] == "1" || request.pending["wednesday_values"]["end_time"] == "1"  %>changed<% end %>"><%= request.weekly.shift %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.wednesday_values["taw"] == "1" %>changed<% end %>"><% if request.wednesday_hash["taw"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.wednesday_values["form_b"] == "1" %>changed<% end %>"><% if request.wednesday_hash["form_b"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.wednesday_values["form_c"] == "1" %>changed<% end %>"><% if request.wednesday_hash["form_c"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.wednesday_values["track_and_time"] == "1" %>changed<% end %>"><% if request.wednesday_hash["track_and_time"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["wednesday_values"]["inacc_track"] == "1" %>changed<% end %>"><% if request.weekly.inacc_track == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" data-reqnum="<%= request.id %>" data-day="wed" data-address="<%= api_v1_request_path(request) %>" class="notes_cell"><div class="notes_content preserve-lines requestor_notes"><%= request.requestor_notes_wed %></div><div class="notes_content preserve-lines admin_notes hidden"><%= request.admin_notes_wed %></div><div class="notes_content preserve-lines inspector_notes hidden"><%= request.inspector_notes_wed %></div></td>
    </tr>
    <% counter += 1 %>
    <% end %>
<% end %>
</tbody>

</table>
</div>

<div id="thursday_table" class="displaytable hidden">
    <table class="requests_table">
      <thead>
        <tr>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Approval Status</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Line #</div></th>
          <th rowspan="2" class="wmedium"><div>Project <br>WD #</div></th>
          <th rowspan="2"  class="wmedium"><div>Contractor</div></th>
          <th colspan="7" class="topheader"><div>Location</th>
          <th rowspan="2"><div class="wlarge">Description of Work</th>
          <th><div>Support Allocation</th>
          <th rowspan="2" class="briefing_details">Briefing Details</th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Single Tracking</div></th>
          <th rowspan="2" class="shift"><div>Shift (24 hr)</th>
          <th colspan="5"><div>Protection</th>
          <th rowspan="2" class="notes"><div class="notes_wrapper"><div class="notes_title">Notes</div><div class="notes_tab_container"><div class="notes_tab active" data-notetype=".requestor_notes" data-daytable="#thursday_table">Requestor</div><div class="notes_tab inactive" data-notetype=".admin_notes" data-daytable="#thursday_table">Admin</div><div class="notes_tab inactive" data-notetype=".inspector_notes" data-daytable="#thursday_table">Inspector</div></div></div></th>
        </tr>
        <tr>
          <th>Mile Post</th>
          <th>Control Point</th>
          <th class="rotated"><div class="smallheader wverysmall">MT1</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT2</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT3</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT4</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Other</div></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 4 %>current_day<% end %>"><%= "Thu\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 4).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 4).day}"%></th>
          <th class="rotated"><div class="smallheader wverysmall">TAW</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form B</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form C</div></th>
          <th class="rotated"><div class="smallheader wverysmall">T&T</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Inacc Trk</div></th>
        </tr>
      </thead>
      <tbody>
        <% counter = 1 %>
  <% @requests.each do |request| %>


  <% if request.thu == 1  || request.thursday_hash["cancelled"] == "yes"%>

      <tr class="hover_row <% if request.cancelled == 1 || request.thursday_hash["cancelled"] == "yes" %>cancelled_day<% end %> <% if request.night_work == 1 %>night_work_line<% end %> <% if request.id == @recent %>recent<% end %>" data-reqnum="<%= request.id %>">
        <td class="reqstatus">
          <div class="index_status hidden">
            <div class="approvals_bar_container">
              <div class="approvals_bar_block <%= request.approval1 %>">
                1
              </div>
              <div class="approvals_bar_block <%= request.approval2 %>">
                2
              </div>
              <div class="approvals_bar_block <%= request.approval3 %>">
                3
              </div>
              <div class="approvals_bar_block <%= request.approval4 %>">
                4
              </div>
            </div>
          </div>

            <div class="status_wrapper">
              <div class="status_half">
                <% case request.approval.group_1_thu %>
                <% when "pending" %>
                  <%= image_tag "tl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_2_thu %>
                <% when "pending" %>
                  <%= image_tag "tr_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tr_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tr_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

              </div>
              <div class="status_half">
                <% case request.approval.group_3_thu %>
                <% when "pending" %>
                  <%= image_tag "bl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "bl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "bl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_4_thu %>
                <% when "pending" %>
                  <%= image_tag "br_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "br_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "br_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>
              </div>
            </div>
      </td>
      <td class="trigger_overlay"><%= counter %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <%= request.color %>"><%= request.requestor_project %><br><%= request.requestor_work_directive %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["contractor"] == "1" %>changed<% end %>"><%= request.contractor %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["thursday_values"]["mp1"] == "1" || request.pending["thursday_values"]["mp2"] == "1"  %>changed<% end %>"><%= "#{request.thursday_hash["mp1"]} -\n#{request.thursday_hash["mp2"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["thursday_values"]["cp1"] == "1" || request.pending["thursday_values"]["cp2"] == "1" %>changed<% end %>"><%= "#{request.parse_cp(request.thursday_hash["cp1"].to_i)} -\n#{request.parse_cp(request.thursday_hash["cp2"].to_i)}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["thursday_values"]["MT1"] == "1" %>changed<% end %>"><% if request.weekly.mt1 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["thursday_values"]["MT2"] == "1" %>changed<% end %>"><% if request.weekly.mt2 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["thursday_values"]["MT3"] == "1" %>changed<% end %>"><% if request.weekly.mt3 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["thursday_values"]["MT4"] == "1" %>changed<% end %>"><% if request.weekly.mt4 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["thursday_values"]["other"] == "1" %>changed<% end %>"><% if request.weekly.other == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["description"] == "1" %>changed<% end %>"><p class="request_title"><%= request.title %></p><%= request.description %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["thu_workers"] == "1" %>changed<% end %>"><%= request.weekly.thu_workers %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["thursday_values"]["b_time"] == "1" || request.pending["thursday_values"]["b_location"] == "1"|| request.pending["thursday_values"]["onsite_name"] == "1" || request.pending["thursday_values"]["onsite_number"] == "1" %>changed<% end %>"><%= "#{request.thursday_hash["b_time"]}\n#{request.thursday_hash["b_location"]}\n#{request.thursday_hash["onsite_name"]}  #{request.thursday_hash["onsite_number"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["thursday_values"]["single_track"] == "1" %>changed<% end %>"><% if request.weekly.single_tracking == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["thursday_values"]["start_time"] == "1" || request.pending["thursday_values"]["end_time"] == "1"  %>changed<% end %>"><%= request.weekly.shift %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.thursday_values["taw"] == "1" %>changed<% end %>"><% if request.thursday_hash["taw"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.thursday_values["form_b"] == "1" %>changed<% end %>"><% if request.thursday_hash["form_b"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.thursday_values["form_c"] == "1" %>changed<% end %>"><% if request.thursday_hash["form_c"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.thursday_values["track_and_time"] == "1" %>changed<% end %>"><% if request.thursday_hash["track_and_time"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["thursday_values"]["inacc_track"] == "1" %>changed<% end %>"><% if request.weekly.inacc_track == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" data-reqnum="<%= request.id %>" data-day="thu" data-address="<%= api_v1_request_path(request) %>" class="notes_cell"><div class="notes_content preserve-lines requestor_notes"><%= request.requestor_notes_thu %></div><div class="notes_content preserve-lines admin_notes hidden"><%= request.admin_notes_thu %></div><div class="notes_content preserve-lines inspector_notes hidden"><%= request.inspector_notes_thu %></div></td>
    </tr>
    <% counter += 1 %>
    <% end %>
<% end %>
</tbody>

</table>
</div>

<div id="friday_table" class="displaytable hidden">
    <table class="requests_table">
      <thead>
        <tr>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Approval Status</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Line #</div></th>
          <th rowspan="2" class="wmedium"><div>Project <br>WD #</div></th>
          <th rowspan="2"  class="wmedium"><div>Contractor</div></th>
          <th colspan="7" class="topheader"><div>Location</th>
          <th rowspan="2"><div class="wlarge">Description of Work</th>
          <th><div>Support Allocation</th>
          <th rowspan="2" class="briefing_details">Briefing Details</th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Single Tracking</div></th>
          <th rowspan="2" class="shift"><div>Shift (24 hr)</th>
          <th colspan="5"><div>Protection</th>
          <th rowspan="2" class="notes"><div class="notes_wrapper"><div class="notes_title">Notes</div><div class="notes_tab_container"><div class="notes_tab active" data-notetype=".requestor_notes" data-daytable="#friday_table">Requestor</div><div class="notes_tab inactive" data-notetype=".admin_notes" data-daytable="#friday_table">Admin</div><div class="notes_tab inactive" data-notetype=".inspector_notes" data-daytable="#friday_table">Inspector</div></div></div></th>
        </tr>
        <tr>
          <th>Mile Post</th>
          <th>Control Point</th>
          <th class="rotated"><div class="smallheader wverysmall">MT1</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT2</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT3</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT4</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Other</div></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 5 %>current_day<% end %>"><%= "Fri\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 5).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 5).day}"%></th>
          <th class="rotated"><div class="smallheader wverysmall">TAW</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form B</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form C</div></th>
          <th class="rotated"><div class="smallheader wverysmall">T&T</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Inacc Trk</div></th>
        </tr>
      </thead>
      <tbody>
        <% counter = 1 %>
  <% @requests.each do |request| %>


  <% if request.fri == 1  || request.friday_hash["cancelled"] == "yes"%>

      <tr class="hover_row <% if request.cancelled == 1 || request.friday_hash["cancelled"] == "yes" %>cancelled_day<% end %> <% if request.night_work == 1 %>night_work_line<% end %> <% if request.id == @recent %>recent<% end %>" data-reqnum="<%= request.id %>">
        <td class="reqstatus">
          <div class="index_status hidden">
            <div class="approvals_bar_container">
              <div class="approvals_bar_block <%= request.approval1 %>">
                1
              </div>
              <div class="approvals_bar_block <%= request.approval2 %>">
                2
              </div>
              <div class="approvals_bar_block <%= request.approval3 %>">
                3
              </div>
              <div class="approvals_bar_block <%= request.approval4 %>">
                4
              </div>
            </div>
          </div>

            <div class="status_wrapper">
              <div class="status_half">
                <% case request.approval.group_1_fri %>
                <% when "pending" %>
                  <%= image_tag "tl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_2_fri %>
                <% when "pending" %>
                  <%= image_tag "tr_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tr_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tr_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

              </div>
              <div class="status_half">
                <% case request.approval.group_3_fri %>
                <% when "pending" %>
                  <%= image_tag "bl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "bl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "bl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_4_fri %>
                <% when "pending" %>
                  <%= image_tag "br_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "br_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "br_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>
              </div>
            </div>
      </td>
      <td class="trigger_overlay"><%= counter %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <%= request.color %>"><%= request.requestor_project %><br><%= request.requestor_work_directive %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["contractor"] == "1" %>changed<% end %>"><%= request.contractor %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["friday_values"]["mp1"] == "1" || request.pending["friday_values"]["mp2"] == "1"  %>changed<% end %>"><%= "#{request.friday_hash["mp1"]} -\n#{request.friday_hash["mp2"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["friday_values"]["cp1"] == "1" || request.pending["friday_values"]["cp2"] == "1" %>changed<% end %>"><%= "#{request.parse_cp(request.friday_hash["cp1"].to_i)} -\n#{request.parse_cp(request.friday_hash["cp2"].to_i)}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["friday_values"]["MT1"] == "1" %>changed<% end %>"><% if request.weekly.mt1 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["friday_values"]["MT2"] == "1" %>changed<% end %>"><% if request.weekly.mt2 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["friday_values"]["MT3"] == "1" %>changed<% end %>"><% if request.weekly.mt3 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["friday_values"]["MT4"] == "1" %>changed<% end %>"><% if request.weekly.mt4 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["friday_values"]["other"] == "1" %>changed<% end %>"><% if request.weekly.other == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["description"] == "1" %>changed<% end %>"><p class="request_title"><%= request.title %></p><%= request.description %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["fri_workers"] == "1" %>changed<% end %>"><%= request.weekly.fri_workers %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["friday_values"]["b_time"] == "1" || request.pending["friday_values"]["b_location"] == "1"|| request.pending["friday_values"]["onsite_name"] == "1" || request.pending["friday_values"]["onsite_number"] == "1" %>changed<% end %>"><%= "#{request.friday_hash["b_time"]}\n#{request.friday_hash["b_location"]}\n#{request.friday_hash["onsite_name"]}  #{request.friday_hash["onsite_number"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["friday_values"]["single_track"] == "1" %>changed<% end %>"><% if request.weekly.single_tracking == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["friday_values"]["start_time"] == "1" || request.pending["friday_values"]["end_time"] == "1"  %>changed<% end %>"><%= request.weekly.shift %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.friday_values["taw"] == "1" %>changed<% end %>"><% if request.friday_hash["taw"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.friday_values["form_b"] == "1" %>changed<% end %>"><% if request.friday_hash["form_b"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.friday_values["form_c"] == "1" %>changed<% end %>"><% if request.friday_hash["form_c"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.friday_values["track_and_time"] == "1" %>changed<% end %>"><% if request.friday_hash["track_and_time"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["friday_values"]["inacc_track"] == "1" %>changed<% end %>"><% if request.weekly.inacc_track == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" data-reqnum="<%= request.id %>" data-day="fri" data-address="<%= api_v1_request_path(request) %>" class="notes_cell"><div class="notes_content preserve-lines requestor_notes"><%= request.requestor_notes_fri %></div><div class="notes_content preserve-lines admin_notes hidden"><%= request.admin_notes_fri %></div><div class="notes_content preserve-lines inspector_notes hidden"><%= request.inspector_notes_fri %></div></td>
    </tr>
    <% counter += 1 %>
    <% end %>
<% end %>
</tbody>

</table>
</div>

<div id="saturday_table" class="displaytable hidden">
    <table class="requests_table">
      <thead>
        <tr>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Approval Status</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Line #</div></th>
          <th rowspan="2" class="wmedium"><div>Project <br>WD #</div></th>
          <th rowspan="2"  class="wmedium"><div>Contractor</div></th>
          <th colspan="7" class="topheader"><div>Location</th>
          <th rowspan="2"><div class="wlarge">Description of Work</th>
          <th><div>Support Allocation</th>
          <th rowspan="2" class="briefing_details">Briefing Details</th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Single Tracking</div></th>
          <th rowspan="2" class="shift"><div>Shift (24 hr)</th>
          <th colspan="5"><div>Protection</th>
          <th rowspan="2" class="notes"><div class="notes_wrapper"><div class="notes_title">Notes</div><div class="notes_tab_container"><div class="notes_tab active" data-notetype=".requestor_notes" data-daytable="#saturday_table">Requestor</div><div class="notes_tab inactive" data-notetype=".admin_notes" data-daytable="#saturday_table">Admin</div><div class="notes_tab inactive" data-notetype=".inspector_notes" data-daytable="#saturday_table">Inspector</div></div></div></th>
        </tr>
        <tr>
          <th>Mile Post</th>
          <th>Control Point</th>
          <th class="rotated"><div class="smallheader wverysmall">MT1</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT2</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT3</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT4</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Other</div></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 6 %>current_day<% end %>"><%= "Sat\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 6).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 6).day}"%></th>
          <th class="rotated"><div class="smallheader wverysmall">TAW</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form B</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form C</div></th>
          <th class="rotated"><div class="smallheader wverysmall">T&T</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Inacc Trk</div></th>
        </tr>
      </thead>
      <tbody>
        <% counter = 1 %>
  <% @requests.each do |request| %>


  <% if request.sat == 1  || request.saturday_hash["cancelled"] == "yes"%>

      <tr class="hover_row <% if request.cancelled == 1 || request.saturday_hash["cancelled"] == "yes" %>cancelled_day<% end %> <% if request.night_work == 1 %>night_work_line<% end %> <% if request.id == @recent %>recent<% end %>" data-reqnum="<%= request.id %>">
        <td class="reqstatus">
          <div class="index_status hidden">
            <div class="approvals_bar_container">
              <div class="approvals_bar_block <%= request.approval1 %>">
                1
              </div>
              <div class="approvals_bar_block <%= request.approval2 %>">
                2
              </div>
              <div class="approvals_bar_block <%= request.approval3 %>">
                3
              </div>
              <div class="approvals_bar_block <%= request.approval4 %>">
                4
              </div>
            </div>
          </div>

            <div class="status_wrapper">
              <div class="status_half">
                <% case request.approval.group_1_sat %>
                <% when "pending" %>
                  <%= image_tag "tl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_2_sat %>
                <% when "pending" %>
                  <%= image_tag "tr_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tr_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tr_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

              </div>
              <div class="status_half">
                <% case request.approval.group_3_sat %>
                <% when "pending" %>
                  <%= image_tag "bl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "bl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "bl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_4_sat %>
                <% when "pending" %>
                  <%= image_tag "br_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "br_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "br_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>
              </div>
            </div>
      </td>
      <td class="trigger_overlay"><%= counter %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <%= request.color %>"><%= request.requestor_project %><br><%= request.requestor_work_directive %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["contractor"] == "1" %>changed<% end %>"><%= request.contractor %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["saturday_values"]["mp1"] == "1" || request.pending["saturday_values"]["mp2"] == "1"  %>changed<% end %>"><%= "#{request.saturday_hash["mp1"]} -\n#{request.saturday_hash["mp2"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["saturday_values"]["cp1"] == "1" || request.pending["saturday_values"]["cp2"] == "1" %>changed<% end %>"><%= "#{request.parse_cp(request.saturday_hash["cp1"].to_i)} -\n#{request.parse_cp(request.saturday_hash["cp2"].to_i)}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["saturday_values"]["MT1"] == "1" %>changed<% end %>"><% if request.weekly.mt1 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["saturday_values"]["MT2"] == "1" %>changed<% end %>"><% if request.weekly.mt2 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["saturday_values"]["MT3"] == "1" %>changed<% end %>"><% if request.weekly.mt3 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["saturday_values"]["MT4"] == "1" %>changed<% end %>"><% if request.weekly.mt4 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["saturday_values"]["other"] == "1" %>changed<% end %>"><% if request.weekly.other == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["description"] == "1" %>changed<% end %>"><p class="request_title"><%= request.title %></p><%= request.description %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["sat_workers"] == "1" %>changed<% end %>"><%= request.weekly.sat_workers %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["saturday_values"]["b_time"] == "1" || request.pending["saturday_values"]["b_location"] == "1"|| request.pending["saturday_values"]["onsite_name"] == "1" || request.pending["saturday_values"]["onsite_number"] == "1" %>changed<% end %>"><%= "#{request.saturday_hash["b_time"]}\n#{request.saturday_hash["b_location"]}\n#{request.saturday_hash["onsite_name"]}  #{request.saturday_hash["onsite_number"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["saturday_values"]["single_track"] == "1" %>changed<% end %>"><% if request.weekly.single_tracking == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["saturday_values"]["start_time"] == "1" || request.pending["saturday_values"]["end_time"] == "1"  %>changed<% end %>"><%= request.weekly.shift %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.saturday_values["taw"] == "1" %>changed<% end %>"><% if request.saturday_hash["taw"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.saturday_values["form_b"] == "1" %>changed<% end %>"><% if request.saturday_hash["form_b"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.saturday_values["form_c"] == "1" %>changed<% end %>"><% if request.saturday_hash["form_c"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.saturday_values["track_and_time"] == "1" %>changed<% end %>"><% if request.saturday_hash["track_and_time"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["saturday_values"]["inacc_track"] == "1" %>changed<% end %>"><% if request.weekly.inacc_track == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" data-reqnum="<%= request.id %>" data-day="sat" data-address="<%= api_v1_request_path(request) %>" class="notes_cell"><div class="notes_content preserve-lines requestor_notes"><%= request.requestor_notes_sat %></div><div class="notes_content preserve-lines admin_notes hidden"><%= request.admin_notes_sat %></div><div class="notes_content preserve-lines inspector_notes hidden"><%= request.inspector_notes_sat %></div></td>
    </tr>
    <% counter += 1 %>
    <% end %>
<% end %>
</tbody>

</table>
</div>

<div id="sunday_table" class="displaytable hidden">
    <table class="requests_table">
      <thead>
        <tr>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Approval Status</div></th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Line #</div></th>
          <th rowspan="2" class="wmedium"><div>Project <br>WD #</div></th>
          <th rowspan="2"  class="wmedium"><div>Contractor</div></th>
          <th colspan="7" class="topheader"><div>Location</th>
          <th rowspan="2"><div class="wlarge">Description of Work</th>
          <th><div>Support Allocation</th>
          <th rowspan="2" class="briefing_details">Briefing Details</th>
          <th rowspan="2" class="rotated trflex"><div class="tallheader">Single Tracking</div></th>
          <th rowspan="2" class="shift"><div>Shift (24 hr)</th>
          <th colspan="5"><div>Protection</th>
          <th rowspan="2" class="notes"><div class="notes_wrapper"><div class="notes_title">Notes</div><div class="notes_tab_container"><div class="notes_tab active" data-notetype=".requestor_notes" data-daytable="#sunday_table">Requestor</div><div class="notes_tab inactive" data-notetype=".admin_notes" data-daytable="#sunday_table">Admin</div><div class="notes_tab inactive" data-notetype=".inspector_notes" data-daytable="#sunday_table">Inspector</div></div></div></th>
        </tr>
        <tr>
          <th>Mile Post</th>
          <th>Control Point</th>
          <th class="rotated"><div class="smallheader wverysmall">MT1</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT2</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT3</div></th>
          <th class="rotated"><div class="smallheader wverysmall">MT4</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Other</div></th>
          <th class="wsmall preserve-lines <% if @thisweek.to_i == Time.zone.now.to_datetime.cweek && @thisyear.to_i == Time.zone.now.to_datetime.cwyear && Time.zone.now.to_datetime.cwday == 7 %>current_day<% end %>"><%= "Sun\n#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 7).month}/#{Date.commercial(@thisyear.to_i, @thisweek.to_i, 7).day}"%></th>
          <th class="rotated"><div class="smallheader wverysmall">TAW</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form B</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Form C</div></th>
          <th class="rotated"><div class="smallheader wverysmall">T&T</div></th>
          <th class="rotated"><div class="smallheader wverysmall">Inacc Trk</div></th>
        </tr>
      </thead>
      <tbody>
        <% counter = 1 %>
  <% @requests.each do |request| %>


  <% if request.sun == 1  || request.sunday_hash["cancelled"] == "yes"%>
      <tr class="hover_row <% if request.cancelled == 1 || request.sunday_hash["cancelled"] == "yes" %>cancelled_day<% end %> <% if request.night_work == 1 %>night_work_line<% end %> <% if request.id == @recent %>recent<% end %>" data-reqnum="<%= request.id %>">
        <td class="reqstatus">
          <div class="index_status hidden">
            <div class="approvals_bar_container">
              <div class="approvals_bar_block <%= request.approval1 %>">
                1
              </div>
              <div class="approvals_bar_block <%= request.approval2 %>">
                2
              </div>
              <div class="approvals_bar_block <%= request.approval3 %>">
                3
              </div>
              <div class="approvals_bar_block <%= request.approval4 %>">
                4
              </div>
            </div>
          </div>

            <div class="status_wrapper">
              <div class="status_half">
                <% case request.approval.group_1_sun %>
                <% when "pending" %>
                  <%= image_tag "tl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_2_sun %>
                <% when "pending" %>
                  <%= image_tag "tr_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "tr_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "tr_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

              </div>
              <div class="status_half">
                <% case request.approval.group_3_sun %>
                <% when "pending" %>
                  <%= image_tag "bl_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "bl_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "bl_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>

                <% case request.approval.group_4_sun %>
                <% when "pending" %>
                  <%= image_tag "br_yellow.png", class: "status_icon", alt: "Pending" %>
                <% when "rejected" %>
                  <%= image_tag "br_red.png", class: "status_icon", alt: "Pending" %>
                <% when "approved" %>
                  <%= image_tag "br_green.png", class: "status_icon", alt: "Pending" %>
                <% end %>
              </div>
            </div>
      </td>
      <td class="trigger_overlay"><%= counter %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <%= request.color %>"><%= request.requestor_project %><br><%= request.requestor_work_directive %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["contractor"] == "1" %>changed<% end %>"><%= request.contractor %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["sunday_values"]["mp1"] == "1" || request.pending["sunday_values"]["mp2"] == "1"  %>changed<% end %>"><%= "#{request.sunday_hash["mp1"]} -\n#{request.sunday_hash["mp2"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["sunday_values"]["cp1"] == "1" || request.pending["sunday_values"]["cp2"] == "1" %>changed<% end %>"><%= "#{request.parse_cp(request.sunday_hash["cp1"].to_i)} -\n#{request.parse_cp(request.sunday_hash["cp2"].to_i)}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["sunday_values"]["MT1"] == "1" %>changed<% end %>"><% if request.weekly.mt1 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["sunday_values"]["MT2"] == "1" %>changed<% end %>"><% if request.weekly.mt2 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["sunday_values"]["MT3"] == "1" %>changed<% end %>"><% if request.weekly.mt3 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["sunday_values"]["MT4"] == "1" %>changed<% end %>"><% if request.weekly.mt4 == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["sunday_values"]["other"] == "1" %>changed<% end %>"><% if request.weekly.other == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["description"] == "1" %>changed<% end %>"><p class="request_title"><%= request.title %></p><%= request.description %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["sun_workers"] == "1" %>changed<% end %>"><%= request.weekly.sun_workers %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["sunday_values"]["b_time"] == "1" || request.pending["sunday_values"]["b_location"] == "1"|| request.pending["sunday_values"]["onsite_name"] == "1" || request.pending["sunday_values"]["onsite_number"] == "1" %>changed<% end %>"><%= "#{request.sunday_hash["b_time"]}\n#{request.sunday_hash["b_location"]}\n#{request.sunday_hash["onsite_name"]}  #{request.sunday_hash["onsite_number"]}" %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["sunday_values"]["single_track"] == "1" %>changed<% end %>"><% if request.weekly.single_tracking == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay preserve-lines <% if request.pending["sunday_values"]["start_time"] == "1" || request.pending["sunday_values"]["end_time"] == "1"  %>changed<% end %>"><%= request.weekly.shift %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.sunday_values["taw"] == "1" %>changed<% end %>"><% if request.sunday_hash["taw"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.sunday_values["form_b"] == "1" %>changed<% end %>"><% if request.sunday_hash["form_b"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.sunday_values["form_c"] == "1" %>changed<% end %>"><% if request.sunday_hash["form_c"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending.sunday_values["track_and_time"] == "1" %>changed<% end %>"><% if request.sunday_hash["track_and_time"] == "1" %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" class="trigger_overlay <% if request.pending["sunday_values"]["inacc_track"] == "1" %>changed<% end %>"><% if request.weekly.inacc_track == true %><%= "\u2713" %><% else %>-<% end %></td>
      <td data-href="<%= request_path(request) %>" data-reqnum="<%= request.id %>" data-day="sun" data-address="<%= api_v1_request_path(request) %>" class="notes_cell"><div class="notes_content preserve-lines requestor_notes"><%= request.requestor_notes_sun %></div><div class="notes_content preserve-lines admin_notes hidden"><%= request.admin_notes_sun %></div><div class="notes_content preserve-lines inspector_notes hidden"><%= request.inspector_notes_sun %></div></td>
    </tr>
    <% counter += 1 %>
    <% end %>
<% end %>
</tbody>

</table>
</div>
</div>
